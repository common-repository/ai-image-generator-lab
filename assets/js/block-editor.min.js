(function(){var e=wp.element.createElement,t={},n=null,s=null;function i(t){return[e("div",{key:"overlay",className:"wpz-aiilg-notice "+(t.isDownloading?"wpz-aiilg-uploading":"wpz-aiilg-loading"),style:{display:"none"}},[e("svg",{viewBox:"0 0 64.989 64.724",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"64.989",height:"64.724",key:"logo",className:"wpz-aiilg-notice-logo",alt:wp.i18n.__("WP Zone logo","wpz-ai-image-lab")},e("defs",null,e("clipPath",{key:"cp1",id:"cp1"},e("path",{d:"M57.957,18.589a24.688,24.688,0,0,1-4.116,17.592c-.2.255-.724.913-1.159,1.372L39.562,50.616a10.007,10.007,0,0,1-7.121,2.95h-.015a10,10,0,0,1-6.064-2.053c4.516,3.841,9.015,6.992,15.354,6.135,4.716-.637,10.458-4,13.648-7.058l3.928-3.928a19.763,19.763,0,0,0,2.726-24.309l.045.031-.211-.3c-.275-.423-.572-.835-.882-1.24-.922-1.288-2.264-3.138-3.382-4.58Z",fill:"none"})),e("linearGradient",{key:"lg1",id:"lg1",x1:"-0.652",y1:"1.148",x2:"-0.628",y2:"1.148",gradientUnits:"objectBoundingBox"},e("stop",{offset:"0",stopColor:"#992fec"}),e("stop",{offset:"0.405",stopColor:"#962ee9"}),e("stop",{offset:"0.6",stopColor:"#8f2be2"}),e("stop",{offset:"0.75",stopColor:"#8227d5"}),e("stop",{offset:"0.876",stopColor:"#6f21c2"}),e("stop",{offset:"0.987",stopColor:"#5819ab"}),e("stop",{offset:"1",stopColor:"#5518a8"})),e("clipPath",{key:"cp2",id:"cp2"},e("path",{d:"M22.228,7.421c-4.716.638-9.413,3.654-12.6,6.714L5.7,18.064A19.762,19.762,0,0,0,2.971,42.373l-.045-.031.211.3c.275.423.571.835.882,1.24.922,1.288,2.264,3.137,3.382,4.579l-.369-2.325a24.689,24.689,0,0,1,4.116-17.592c.2-.255.724-.913,1.159-1.372L25.427,14.11a10,10,0,0,1,7.122-2.95h.014a9.984,9.984,0,0,1,6.064,2.053c-3.964-3.372-8.72-5.947-14.109-5.947a17.054,17.054,0,0,0-2.29.155",fill:"none"})),e("linearGradient",{key:"lg2",id:"lg2",x1:"0.044",y1:"1.395",x2:"0.069",y2:"1.395",gradientUnits:"objectBoundingBox"},e("stop",{offset:"0",stopColor:"#ec8444"}),e("stop",{offset:"0.277",stopColor:"#e88142"}),e("stop",{offset:"0.504",stopColor:"#de7a3e"}),e("stop",{offset:"0.713",stopColor:"#cd6e37"}),e("stop",{offset:"0.91",stopColor:"#b55d2e"}),e("stop",{offset:"1",stopColor:"#a85429"})),e("clipPath",{key:"cp3",id:"cp3"},e("rect",{width:"64.989",height:"64.724",transform:"translate(0 0.001)",fill:"none"}))),e("g",{key:"g1",transform:"translate(0 0)"},e("g",{key:"g1"},e("g",{clipPath:"url(#cp1)"},e("rect",{width:"40.413",height:"42.241",transform:"translate(26.362 16.264)",fill:"url(#lg1)"}))),e("g",{key:"g2"},e("g",{clipPath:"url(#cp2)"},e("rect",{width:"40.413",height:"41.195",transform:"translate(-1.786 7.266)",fill:"url(#lg2)"}))),e("g",{key:"g3"},e("g",{clipPath:"url(#cp3)"},e("path",{d:"M17.384,58.463A21.089,21.089,0,0,0,32.41,64.725h.031a21.09,21.09,0,0,0,15.011-6.218L54.858,51.1l0,0,.508-.509a21.731,21.731,0,0,1-29,.923h0A10.281,10.281,0,0,1,25.3,50.6a10.091,10.091,0,0,1,.02-14.223L36.34,25.35a5.58,5.58,0,0,0-7.89-7.892L17.428,28.482a21.266,21.266,0,0,0-.044,29.981",fill:"#a43dff"}),e("path",{d:"M47.6,6.262A21.089,21.089,0,0,0,32.579,0h-.031A21.09,21.09,0,0,0,17.537,6.218l-7.406,7.406,0,0-.508.509a21.731,21.731,0,0,1,29-.923h0a10.281,10.281,0,0,1,1.066.919,10.091,10.091,0,0,1-.02,14.223L28.649,39.375a5.579,5.579,0,1,0,7.89,7.891L47.561,36.243A21.266,21.266,0,0,0,47.6,6.262",fill:"#fd925c"}))))),e(wp.components.Tooltip,{key:"text-loading-tooltip",position:"top right",text:wp.i18n.__("Generating images typically takes up to a minute. If it takes longer than three minutes, please try your request again later.","wpz-ai-image-lab"),delay:0},e("span",{key:"text-loading",className:"wpz-aiilg-notice-loading"},wp.i18n.__("Loading...","wpz-ai-image-lab"))),e(wp.components.Tooltip,{key:"text-uploading-tooltip",position:"top right",text:wp.i18n.__("Uploading an image can take a bit, especially for high resolution images.","wpz-ai-image-lab"),delay:0},e("span",{key:"text-uploading",className:"wpz-aiilg-notice-uploading"},wp.i18n.__("Uploading...","wpz-ai-image-lab")))]),t.src?e("div",{key:"img-wrapper",className:"wpz-aiilg-preview-image-wrapper"},e("img",{key:"img",src:t.src,alt:t.alt,className:t.className+" hidden",width:t.width,height:t.height,onLoad:function(e){jQuery(e.target).removeClass("hidden").parent().prev(".wpz-aiilg-notice").removeClass("wpz-aiilg-loading"),t.onLoad&&t.onLoad(e)},onError:function(e){var t=e.target;t.isConnected&&setTimeout(function(){t.src=t.src},1e3)}})):null]}wp.blocks.registerBlockType("wpz-aiil/image",{icon:e("svg",{viewBox:"0 0 47.9 38.9",xmlns:"http://www.w3.org/2000/svg"},e("g",null,e("path",{style:{fill:"#fc915c"},d:"m28.92,21.86l-13.14,13.14h-5.56l8.38-8.3c.77-.76.77-2,0-2.76-.76-.75-1.98-.75-2.74,0l-12.6,12.48c1.72,1.54,3.99,2.49,6.47,2.49h7.67l13.78-13.78,9.37,9.37c-.73.33-1.53.51-2.38.51h-11.36l-3.9,3.9h15.26c3.35,0,6.31-1.7,8.06-4.29l-12.8-12.75c-1.24-1.24-3.27-1.24-4.52,0ZM38.17,0h-9.78v11.41l-7.66,7.66c-.76.76-.76,2,0,2.76.38.38.88.57,1.38.57s1-.19,1.38-.57l8.23-8.23c.37-.37.57-.86.57-1.38V3.9h3.9v4.06l3.9,3.9v-7.63c2.27.8,3.9,2.96,3.9,5.49v11.56l-7.8-7.81v5.52l11.58,11.64c.07-.48.12-.96.12-1.46V9.73c0-5.36-4.36-9.73-9.73-9.73Zm-13.67,9.06V0h-6.61l-3.94,3.9h0L3.9,13.85v-4.12c0-2.68,1.82-4.94,4.29-5.62L12.35,0h-2.62C4.36,0,0,4.36,0,9.73v13.43L19.5,3.9h1.1v4.34L0,28.62v.55c0,1.45.33,2.83.9,4.07L23.92,10.44c.37-.37.58-.87.58-1.39Z"}))),example:{attributes:{img:wpz_aiilg.pluginUrl+"/assets/img/block-sample.jpg",imgWidth:768,imgHeight:432,promptText:"snowy rocky mountains"}},transforms:{to:["core/image","core/cover","core/gallery","core/media-text","kadence/image","kadence/advancedgallery","kadence/infobox","kadence/rowlayout","kadence/column"].map(function(e){switch(e){case"core/gallery":var t=function(t){return wp.blocks.createBlock(e,{images:[{url:t.img,fullUrl:t.img,id:t.imgId,alt:t.promptText}],align:t.align})};break;case"kadence/advancedgallery":t=function(t){return wp.blocks.createBlock(e,{ids:[t.imgId],images:[{url:t.img,id:t.imgId,alt:t.promptText,thumbUrl:t.img,lightUrl:t.img,width:t.imgWidth,height:t.imgHeight}],align:t.align})};break;case"kadence/infobox":t=function(t){return wp.blocks.createBlock(e,{mediaType:"image",mediaImage:[{url:t.img,id:t.imgId,alt:t.promptText,width:t.imgWidth,height:t.imgHeight,maxWidth:t.imgWidth}],align:t.align})};break;case"kadence/rowlayout":t=function(t){return wp.blocks.createBlock(e,{bgImg:t.img,bgImgId:t.imgId})};break;case"kadence/column":t=function(t){return wp.blocks.createBlock(e,{backgroundImg:[{bgImg:t.img,bgImgId:t.imgId}]})};break;case"core/media-text":t=function(t){return wp.blocks.createBlock(e,{mediaUrl:t.img,mediaId:t.imgId,mediaType:"image",mediaAlt:t.promptText,align:t.align})};break;default:t=function(t){return wp.blocks.createBlock(e,{url:t.img,id:t.imgId,alt:t.promptText,align:t.align})}}return{type:"block",blocks:[e],isMatch:function(e){return e.img&&!e.imgGetUrl},transform:t}})},edit:function(a){window.wpzAiImagesConfig.settings.width=parseInt(window.wpzAiImagesConfig.settings.width),window.wpzAiImagesConfig.settings.height=parseInt(window.wpzAiImagesConfig.settings.height),window.wpzAiImagesConfig.settings.ratio=parseFloat(window.wpzAiImagesConfig.settings.ratio);var r,c,l,u,m,p,g,v,b,j,y,_,w,O,x,d=Object.assign({},window.wpzAiImagesConfig.settings,{width:parseInt(a.attributes.imgWidth),height:parseInt(a.attributes.imgHeight),ratio:parseFloat(a.attributes.imgRatio)});for(u in d)u.substring(0,9)==="modifier_"&&delete d[u];for(p in a.attributes)a.attributes[p]&&p.substring(0,9)==="modifier_"&&(d[p]=a.attributes[p]);for(u in d)if(d[u]!==window.wpzAiImagesConfig.settings[u]){s&&clearTimeout(s),s=setTimeout(function(){s=null,window.jQuery.post(window.wpzAiImagesConfig.ajaxurl,{action:"wpz-ai-images-settings-save",nonce:wpz_aiilg.settingsSaveNonce,settings:JSON.stringify(d)},function(){window.wpzAiImagesConfig.settings=d,o()})},3e3);break}function h(){var e,n,t=[{type:"text",text:a.attributes.promptText}];for(e in a.attributes)a.attributes[e]&&e.substring(0,9)==="modifier_"&&t.push({type:"modifier",category:e.substring(9),modifier:a.attributes[e]});n={action:"generate",key:wpz_aiilg.key,p:JSON.stringify(t),w:a.attributes.imgWidth,h:a.attributes.imgHeight,q:0},jQuery.post(wpz_aiilg.apiUrl,n,function(e){e.urls?a.setAttributes({images:a.attributes.images?a.attributes.images.concat(e.urls):e.urls,img:e.urls[0].preview,imgGetUrl:e.urls[0].get,imgIsLoaded:null,regenerate:null}):a.setAttributes({errorState:"generateOther",regenerate:null})},"json").fail(function(e){switch(e.status){case 451:a.setAttributes({errorState:"promptBlocked",regenerate:null});break;case 429:var t=JSON.parse(e.responseText);t&&t.error&&t.error==="quota"?a.setAttributes({errorState:"generateQuota",regenerate:null}):a.setAttributes({errorState:"rateLimit",regenerate:null});break;default:a.setAttributes({errorState:"generateOther",regenerate:null})}})}function f(){a.attributes.img&&(t[a.clientId]&&(clearTimeout(t[a.clientId]),delete t[a.clientId]),a.setAttributes({images:[],img:null,imgGetUrl:null,regenerate:"pending"}),t[a.clientId]=setTimeout(E,2e3))}function E(){t[a.clientId]&&delete t[a.clientId],a.setAttributes({regenerate:!0})}if(a.attributes.regenerate&&a.attributes.regenerate!=="pending"&&h(),_=wp.blockEditor.useBlockProps({className:"wpz-ai-images-"+(window.wpz_aiilg.isPro?"pro":"free")}),a.attributes.img||a.attributes.regenerate?(j=[],a.attributes.imgGetUrl&&j.push("wpz-aiilg-preview-image"),b=e(i,{key:"img-"+(a.attributes.img?a.attributes.img.split("/").slice(-3).join(""):"null"),src:a.attributes.img,alt:a.attributes.promptText,className:j.join(" "),width:a.attributes.imgWidth,height:a.attributes.imgHeight,isDownloading:a.attributes.isDownloading,onLoad:function(){a.attributes.imgIsLoaded||a.setAttributes({imgIsLoaded:!0})}})):(wpz_aiilg.userHasCapability?wpz_aiilg.hasKey?(g=wp.i18n.__("Enter your prompt text below, then click the Generate Image button. Use the arrows in the toolbar to navigate between alternate images, then click the checkmark to select an image. After selecting an image, you can optionally transform this block into a different block (such as the Image block) for more formatting and other options.","wpz-ai-image-lab")+" "+(wpz_aiilg.isPro?wp.i18n.__("Image previews may be rendered at a lower resolution than the resolution you selected, which will be used for the final image after selecting an image. As a result, previews may appear blurry.","wpz-ai-image-lab"):wp.i18n.__("Visible watermarks in the preview image will be removed after selecting an image.","wpz-ai-image-lab"))):(g=wp.i18n.__("You haven't connected your site to AI Image Lab! Please save your changes, close the editor, and follow the instructions on the AI Image Lab settings page.","wpz-ai-image-lab")):(g=wp.i18n.__("Your user account doesn't have the required permissions (upload_files capability) to generate images with AI Image Lab. Please contact your site's administrator if you need this functionality.","wpz-ai-image-lab")),b=e(wp.components.Placeholder,{key:"placeholder"},[e("p",{key:"instructions"},g),wpz_aiilg.hasKey&&wpz_aiilg.userHasCapability?[wpz_aiilg.isPro?null:e("p",{className:"wpz-aiilg-pro-upsell"},e("a",{href:"https://wpzone.co/product/ai-image-generator-lab/",target:"_blank"},wp.i18n.__("Upgrade to AI Image Lab Pro for higher image resolutions, no quota (reasonable limits apply), and more!","wpz-ai-image-lab"))),e(wp.components.TextareaControl,{key:"fld",placeholder:wp.i18n.__("Enter some text to describe the image you would like to create...","wpz-ai-image-lab"),className:"wpz-aiilg-placeholder-field",rows:2,value:a.attributes.promptText?a.attributes.promptText:"",onChange:function(e){a.setAttributes({promptText:e})},onKeyDown:function(e){e.keyCode==13&&(a.attributes.promptText&&h(),e.preventDefault())}}),e(wp.components.Button,{key:"btn-gen",variant:"primary",disabled:!a.attributes.promptText,onClick:function(){h()}},wp.i18n.__("Generate Image","wpz-ai-image-lab"))]:wpz_aiilg.userHasCapability?e(wp.components.Button,{key:"btn-settings",variant:"primary",href:wpz_aiilg.adminPageUrl,target:"_blank"},wp.i18n.__("Go to Settings","wpz-ai-image-lab")):null])),l=[],c=a.attributes.img&&(!a.attributes.images||!a.attributes.images.length),a.attributes.images&&a.attributes.images.length&&(l.push(e(wp.components.ToolbarButton,{key:"btn-prev",icon:"arrow-left-alt",label:wp.i18n.__("Previous Image","wpz-ai-image-lab"),showTooltip:!0,disabled:a.attributes.img==a.attributes.images[0].preview,onClick:function(){for(var e=0;e<a.attributes.images.length;++e)a.attributes.images[e].preview==a.attributes.img&&e&&a.setAttributes({img:a.attributes.images[e-1].preview,imgGetUrl:a.attributes.images[e-1].get,imgIsLoaded:null})}})),l.push(e(wp.components.ToolbarButton,{key:"btn-next",icon:"arrow-right-alt",label:wp.i18n.__("Next Image","wpz-ai-image-lab"),showTooltip:!0,onClick:function(){for(var e=0;e<a.attributes.images.length;++e)a.attributes.images[e].preview==a.attributes.img&&e<a.attributes.images.length-1&&(a.setAttributes({img:a.attributes.images[e+1].preview,imgGetUrl:a.attributes.images[e+1].get,imgIsLoaded:null}),a.attributes.images.length-e<4&&h())}}))),a.attributes.imgGetUrl){function C(e){jQuery.post(ajaxurl,{action:"wpz-ai-images-upload",url:e,postId:jQuery("#post_ID").length?parseInt(jQuery("#post_ID").val()):0,prompt:a.attributes.promptText,nonce:wpz_aiilg.getNonce},function(t){t.success&&t.data?t.data.wait?setTimeout(function(){C(e)},3e3):a.setAttributes({img:t.data.url,imgId:t.data.id,imgIsLoaded:null,isDownloading:null}):a.setAttributes({errorState:"downloadOther"})},"json").fail(function(){a.setAttributes({errorState:"downloadOther"})})}a.attributes.imgIsLoaded&&l.push(e(wp.components.ToolbarButton,{key:"btn-get",icon:"saved",label:wp.i18n.__("Use this Image","wpz-ai-image-lab"),showTooltip:!0,onClick:function(){C(a.attributes.imgGetUrl),a.setAttributes({images:[],imgGetUrl:null,isDownloading:!0})}}))}if(a.attributes.img&&l.push(e(wp.components.ToolbarButton,{key:"btn-edit",icon:"edit",label:wp.i18n.__("Change Prompt","wpz-ai-image-lab"),showTooltip:!0,onClick:function(){a.setAttributes({images:[],img:null,imgGetUrl:null})}})),y=[],l.length&&y.push(e(wp.components.ToolbarGroup,{key:"group-aiil-nav"},l)),O=Object.entries(wpz_aiilg.promptModifiers).map(function(t){if(!t[1].showIfCondition||a.attributes["modifier_"+t[1].showIfCondition]==t[1].showIfValue)return e(wp.components.PanelRow,{key:"row-modifier-"+t[0]},[e(wp.components.BaseControl,{key:"picker",label:t[1].label},e(wp.components.__experimentalGrid,{key:"picker-grid",className:"wpz-aiilg-style-grid"},Object.entries(t[1].values).map(function(n){return n[0]==="other"?e(wp.components.SelectControl,{key:"picker-other",options:[{label:"",value:""}].concat(Object.entries(n[1]).map(function(e){return{label:e[1],value:e[0]}})),value:!c&&n[1].hasOwnProperty(a.attributes["modifier_"+t[0]])?a.attributes["modifier_"+t[0]]:"",disabled:c,onChange:function(e){var n={};n["modifier_"+t[0]]=e,a.setAttributes(n)}}):e(wp.components.Button,{key:"picker-option-"+n[0],"aria-label":n[1].label,style:{backgroundImage:"url("+n[1]["sample-image"]+")"},isPressed:!c&&a.attributes["modifier_"+t[0]]==n[0],disabled:c,onClick:function(){var e={};e["modifier_"+t[0]]=a.attributes["modifier_"+t[0]]===n[0]?"":n[0],a.setAttributes(e),f()}},e("span",null,n[1].label))})))])}),a.attributes.showProSizeNotice?(m=e(wp.components.Notice,{key:"notice-size",status:"error",isDismissible:!1,className:"wpz-aiilg-hd-mode-upgrade-notice"},[e("p",{key:"main"},e("strong",null,wp.i18n.__("Upgrade to Pro for HD mode","wpz-ai-image-lab"))),e("p",{key:"sub"},wp.i18n.__("You'll need AI Image Lab Pro to generate images with a dimension greather than 768px (up to 2048px!) via HD mode.","wpz-ai-image-lab")),e(wp.components.Button,{key:"btn",variant:"primary",href:"https://wpzone.co/product/ai-image-generator-lab/",target:"_blank"},wp.i18n.__("Details","wpz-ai-image-lab"))])):wpz_aiilg.isPro&&Math.max(a.attributes.imgWidth,a.attributes.imgHeight)>768?(m=e(wp.components.Notice,{key:"notice-size",status:"info",isDismissible:!1,className:"wpz-aiilg-hd-mode-notice"},[e("p",{key:"main"},e("strong",null,"HD mode activated!")),e("p",{key:"sub"},wp.i18n.__("Images with a dimension greather than 768px take longer to download after selecting an image, and the downloaded image may vary slightly from the preview.","wpz-ai-image-lab"))])):m=null,w=null,a.attributes.errorState){switch(a.attributes.errorState){case"promptBlocked":r=wp.i18n.__("Your prompt text contains word(s) or phrase(s) which may violate our terms of use. Please try rewriting your prompt to remove any content that is not permitted on this service.","wpz-ai-image-lab");break;case"rateLimit":r=wp.i18n.__("You have reached the maximum number of requests that you may make at this time. Please try again later.","wpz-ai-image-lab");break;case"generateQuota":wpz_aiilg.isPro?(r=wp.i18n.__("You have reached the maximum number of requests that you may make at this time. Please try again later.","wpz-ai-image-lab")):(r=wp.i18n.__("You have reached your image download quota for the current 24-hour period. Please try again later or purchase AI Image Lab Pro.","ai-image-lab"));break;case"generateOther":r=wp.i18n.__("Something went wrong when submitting your request. Please try again, and if the problem persists please wait a bit before submitting your request again.","ai-image-lab");break;case"downloadOther":wpz_aiilg.isPro?(r=wp.i18n.__("Something went wrong while downloading your image. Please try again.","ai-image-lab")):(r=wp.i8n.__("Something went wrong while downloading your image. You may have reached your download limit for the current 24-hour period; if so, you may want to get AI Image Lab Pro. If you don't think that's the case, please try again.","ai-image-lab"));break}r&&(x=!wpz_aiilg.isPro&&(a.attributes.errorState==="generateQuota"||a.attributes.errorState==="downloadOther"),v=[],!wpz_aiilg.isPro&&(a.attributes.errorState==="generateQuota"||a.attributes.errorState==="downloadOther")&&v.push(e(wp.components.Button,{key:"btn-pro",variant:"primary",href:"https://wpzone.co/product/ai-image-generator-lab/",target:"_blank",onClick:function(){a.setAttributes({errorState:null})}},wp.i18n.__("Get Pro","ai-image-lab"))),v.push(e(wp.components.Button,{key:"btn-close",variant:x?"secondary":"primary",onClick:function(){a.setAttributes({errorState:null})}},wp.i18n.__("Close","ai-image-lab"))),w=e(wp.components.Modal,{key:"modal",title:wp.i18n.__("Error","ai-image-lab"),onRequestClose:function(){a.setAttributes({errorState:null})}},[e("p",{key:"message"},r),v]))}return _.key="block",[e("div",_,b),w,e(wp.blockEditor.BlockControls,{key:"block-controls"},y),e(wp.blockEditor.InspectorControls,{key:"inspector-controls"},[a.attributes.img&&!c?e(wp.components.Notice,{key:"notice-regenerate",status:"warning",isDismissible:!1,className:"wpz-aiilg-regenerate-warning"},wp.i18n.__("Changing image size or style options after image generation will result in a new set of images being generated.","wpz-ai-image-lab")):null,e(wp.components.PanelBody,{key:"panel-info",title:wp.i18n.__("More Information","wpz-ai-image-lab"),initialOpen:!1,onToggle:function(e){e&&n===null&&window.jQuery.post(ajaxurl,{action:"wpz-ai-images-block-instructions"},function(e){n=e,a.setAttributes({promptText:a.attributes.promptText+" "}),a.setAttributes({promptText:a.attributes.promptText})},"text")}},e("div",n===null?{className:"wpz-aiilg-placeholder-info-panel-content"}:{className:"wpz-aiilg-placeholder-info-panel-content",dangerouslySetInnerHTML:{__html:n}},n===null?e(wp.components.Spinner):null)),e(wp.components.PanelBody,{key:"panel-size",title:wp.i18n.__("Image Size","wpz-ai-image-lab")},[e(wp.components.PanelRow,{key:"panel-row-ratio"},e(wp.components.SelectControl,{label:wp.i18n.__("Aspect Ratio","wpz-ai-image-lab"),options:[{label:wp.i18n.__("1:1 (square)","wpz-ai-image-lab"),value:1},{label:wp.i18n.__("3:2 (landscape)","wpz-ai-image-lab"),value:1.5},{label:wp.i18n.__("2:3 (portrait)","wpz-ai-image-lab"),value:.666667},{label:wp.i18n.__("16:9 (landscape)","wpz-ai-image-lab"),value:1.777778},{label:wp.i18n.__("9:16 (portrait)","wpz-ai-image-lab"),value:.5625},{label:wp.i18n.__("Custom size","wpz-ai-image-lab"),value:0}],value:a.attributes.imgRatio,disabled:c,onChange:function(e){var t={imgRatio:e,showProSizeNotice:null};parseFloat(e)&&(t.imgWidth=Math.round(a.attributes.imgHeight*e),t.imgWidth>(wpz_aiilg.isPro?2048:768)&&(t.imgWidth=wpz_aiilg.isPro?2048:768,t.imgHeight=Math.round(t.imgWidth/e),wpz_aiilg.isPro||(t.showProSizeNotice=!0))),a.setAttributes(t),f()}})),e(wp.components.__experimentalHStack,{key:"panel-row-size",alignment:"top"},[e(wp.components.__experimentalInputControl,{key:"fld-width",label:wp.i18n.__("Width","wpz-ai-image-lab"),suffix:"px",type:"number",value:a.attributes.imgWidth,disabled:c||parseFloat(a.attributes.imgRatio)!==0,onChange:function(e){var t={imgWidth:Math.min(wpz_aiilg.isPro?2048:768,e),showProSizeNotice:null};!wpz_aiilg.isPro&&e>768&&(t.showProSizeNotice=!0),a.setAttributes(t),f()}}),e(wp.components.__experimentalInputControl,{key:"fld-height",label:wp.i18n.__("Height","wpz-ai-image-lab"),suffix:"px",type:"number",value:a.attributes.imgHeight,disabled:c,onChange:function(e){var t={imgHeight:Math.min(wpz_aiilg.isPro?2048:768,e),showProSizeNotice:null};!wpz_aiilg.isPro&&e>768&&(t.showProSizeNotice=!0),parseFloat(a.attributes.imgRatio)&&(t.imgWidth=Math.round(a.attributes.imgRatio*e),t.imgWidth>(wpz_aiilg.isPro?2048:768)&&(t.imgWidth=wpz_aiilg.isPro?2048:768,t.imgHeight=Math.round(t.imgWidth/a.attributes.imgRatio),wpz_aiilg.isPro||(t.showProSizeNotice=!0))),a.setAttributes(t),f()}})]),m]),e(wp.components.PanelBody,{key:"panel-style",title:wp.i18n.__("Image Style","wpz-ai-image-lab")},O)])]},save:function(t){var n,s=wp.blockEditor.useBlockProps.save();return t.attributes.img&&!t.attributes.imgGetUrl?(n=e("img",{src:t.attributes.img,alt:t.attributes.promptText,width:t.attributes.imgWidth,height:t.attributes.imgHeight})):(n=null),e("div",s,n)}});function o(){var e,n,t=window.wp.blocks.getBlockType("wpz-aiil/image");if(t)for(n in window.wpzAiImagesConfig.settings){switch(n){case"width":e="imgWidth";break;case"height":e="imgHeight";break;case"ratio":e="imgRatio";break;default:e=n}t.attributes[e]?t.attributes[e].default=window.wpzAiImagesConfig.settings[n]:t.attributes[e]={default:window.wpzAiImagesConfig.settings[n]}}}window.jQuery(document).on("ready",o)})()